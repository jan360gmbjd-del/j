<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>JANNNMG</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            width: 650px;
            height: 650px;
            background-image: url('assets/game-over.gif');
            background-size: cover;
            background-position: center;
            overflow: hidden;
            cursor: pointer;
        }
        
        #closeButton {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 30px;
            height: 30px;
            background-color: rgba(255, 255, 255, 0.5);
            border: none;
            border-radius: 50%;
            cursor: pointer;
            font-size: 18px;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 10;
        }
    </style>
</head>
<body>
    <button id="closeButton">Ã—</button>
    <audio id="popupSound">
        <source src="assets/game-over-sound.mp3" type="audio/mpeg">
    </audio>
    
    <script>
        let x = Math.random() * (screen.availWidth - 650);
        let y = Math.random() * (screen.availHeight - 650);
        let vx = (Math.random() - 0.5) * 10;
        let vy = (Math.random() - 0.5) * 10;
        let stuckToCursor = false;
        
        const closeButton = document.getElementById('closeButton');
        const popupSound = document.getElementById('popupSound');
        
        function animate() {
            if (!stuckToCursor) {
                const screenWidth = screen.availWidth;
                const screenHeight = screen.availHeight;
                const windowWidth = window.outerWidth;
                const windowHeight = window.outerHeight;

                x += vx;
                y += vy;

                if (x + windowWidth > screenWidth || x < 0) {
                    vx = -vx;
                }
                if (y + windowHeight > screenHeight || y < 0) {
                    vy = -vy;
                }

                window.moveTo(x, y);
            }
            
            requestAnimationFrame(animate);
        }
        
        function createNewPopup() {
            setTimeout(() => {
                window.open('popup.html', 'popup_' + Date.now(), 'width=650,height=650,resizable=no,scrollbars=no,toolbar=no');
                createNewPopup();
            }, Math.random() * 2000 + 4000);
        }
        
        document.addEventListener('mousemove', function(e) {
            if (stuckToCursor) {
                window.moveTo(e.screenX - 325, e.screenY - 325);
            }
        });
        
        document.addEventListener('click', function(e) {
            if (e.target !== closeButton) {
                stuckToCursor = !stuckToCursor;
                window.open('popup.html', 'popup_' + Date.now(), 'width=650,height=650,resizable=no,scrollbars=no,toolbar=no');
            }
        });
        
        closeButton.addEventListener('click', function() {
            window.close();
        });
        
        window.onload = function() {
            animate();
            createNewPopup();
            popupSound.play();
        };
    </script>
</body>
</html>
