<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Agree</title>
    
    <!-- =================== CSS СТИЛИ =================== -->
    <style>
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%;
            background-color: #d3d3d3; /* Нейтральный серый фон */
            overflow: hidden; /* Важно для полноэкранного режима */
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: sans-serif;
        }

        #startButton {
            background: white;
            border: 2px solid black;
            padding: 20px 40px;
            font-size: 24px;
            cursor: pointer;
        }

        .window {
            position: fixed; /* Окно позиционируется относительно экрана */
            width: 200px;
            height: 100px;
            background: white;
            border: 1px solid black;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 18px;
            cursor: pointer;
            user-select: none; /* Чтобы нельзя было выделить текст */
        }
    </style>

</head>
<body>

    <!-- =================== HTML РАЗМЕТКА =================== -->
    <button id="startButton">agree</button>


    <!-- =================== JAVASCRIPT ЛОГИКА =================== -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const startButton = document.getElementById('startButton');
            const windows = [];

            // --- Функция для входа в полноэкранный режим (блокировка панели задач) ---
            function goFullscreen() {
                const elem = document.documentElement;
                if (elem.requestFullscreen) {
                    elem.requestFullscreen();
                } else if (elem.webkitRequestFullscreen) { /* Safari */
                    elem.webkitRequestFullscreen();
                } else if (elem.msRequestFullscreen) { /* IE11 */
                    elem.msRequestFullscreen();
                }
            }

            // --- Функция создания нового окна ---
            function createWindow() {
                const win = document.createElement('div');
                win.classList.add('window');
                win.innerText = 'hello';

                // Случайная начальная позиция
                const x = Math.random() * (window.innerWidth - 200);
                const y = Math.random() * (window.innerHeight - 100);

                // Случайная скорость и направление
                const vx = (Math.random() - 0.5) * 4; // Скорость поменьше для плавности
                const vy = (Math.random() - 0.5) * 4;

                const windowData = {
                    element: win,
                    x: x,
                    y: y,
                    vx: vx,
                    vy: vy,
                    clicks: 0 // Счетчик кликов для этого окна
                };

                windows.push(windowData);
                document.body.appendChild(win);

                // При клике на окно
                win.addEventListener('click', () => {
                    windowData.clicks++;
                    win.innerText = `hello +${windowData.clicks}`; // Обновляем текст в этом окне
                    createWindow(); // И создаем новое окно
                });
            }

            // --- Функция плавной анимации ---
            function animate() {
                windows.forEach(w => {
                    // Двигаем окно
                    w.x += w.vx;
                    w.y += w.vy;

                    // Отталкивание от краев экрана
                    if (w.x + w.element.offsetWidth > window.innerWidth || w.x < 0) {
                        w.vx = -w.vx;
                    }
                    if (w.y + w.element.offsetHeight > window.innerHeight || w.y < 0) {
                        w.vy = -w.vy;
                    }

                    // Применяем новую позицию
                    w.element.style.left = w.x + 'px';
                    w.element.style.top = w.y + 'px';
                });

                requestAnimationFrame(animate); // Продолжаем анимацию
            }

            // --- Запуск ---
            startButton.addEventListener('click', () => {
                goFullscreen(); // 1. Входим в полноэкранный режим
                startButton.style.display = 'none'; // 2. Скрываем кнопку
                
                createWindow(); // 3. Создаем первое окно
                animate(); // 4. Запускаем анимацию
            });
        });
    </script>

</body>
</html>
