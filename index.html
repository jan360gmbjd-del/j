<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Windows 98 Button</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background-color: white;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: 'Times New Roman', Times, serif;
            position: relative;
        }
        .welcome {
            position: absolute;
            top: 10px;
            left: 10px;
            font-family: 'Times New Roman', Times, serif;
            font-size: 24px;
            color: #000000;
            text-shadow: none;
        }
        .win98-button {
            background-color: #C0C0C0;
            border: 2px solid;
            border-color: #FFFFFF #808080 #808080 #FFFFFF;
            padding: 20px 40px;
            font-size: 24px;
            font-family: 'Times New Roman', Times, serif;
            font-weight: bold;
            cursor: pointer;
            color: #000000;
            text-transform: uppercase;
            letter-spacing: 2px;
            outline: none;
            box-shadow: none;
            position: relative;
        }
        .win98-button:hover {
            background-color: #C0C0C0;
            border-color: #FFFFFF #808080 #808080 #FFFFFF;
        }
        .win98-button:active {
            border-color: #808080 #FFFFFF #FFFFFF #808080;
            padding: 21px 39px 19px 41px;
        }
        .win98-button:focus {
            outline: 1px dotted #000000;
            outline-offset: -4px;
        }
        .content {
            text-align: center;
        }
        #gameCanvas {
            display: none;
            border: 4px double #808080;
            background-color: #FFFFFF;
            image-rendering: crisp-edges;
            image-rendering: -webkit-optimize-contrast;
            image-rendering: pixelated;
        }
        .hidden-content {
            display: none;
            margin-top: 30px;
            padding: 20px;
            background-color: #C0C0C0;
            border: 2px solid;
            border-color: #FFFFFF #808080 #808080 #FFFFFF;
            font-family: monospace;
            font-size: 14px;
        }
        .window-title {
            background: linear-gradient(to right, #000080, #1084D0);
            color: white;
            padding: 3px 5px;
            margin: -20px -20px 15px -20px;
            font-weight: bold;
            font-size: 12px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .close-button {
            background: #C0C0C0;
            border: 1px solid;
            border-color: #FFFFFF #808080 #808080 #FFFFFF;
            width: 16px;
            height: 14px;
            font-size: 10px;
            line-height: 12px;
            text-align: center;
            cursor: pointer;
        }
        .close-button:active {
            border-color: #808080 #FFFFFF #FFFFFF #808080;
        }
        #restartBtn {
            margin-top: 15px;
        }
    </style>
</head>
<body>
    <div class="welcome">welcome to jannnmgc web</div>
    <div class="content">
        <button class="win98-button" onclick="showContent()">
            CLICK HERE!!!
        </button>
        <canvas id="gameCanvas" width="900" height="500" tabindex="0"></canvas>
      
        <div id="gameOver" class="hidden-content">
            <div class="window-title">
                <span>Game Over</span>
                <button class="close-button" onclick="restart()">X</button>
            </div>
            <p>Distance: <span id="finalScore">0</span></p>
            <button class="win98-button" id="restartBtn" onclick="restart()">RESTART LEVEL</button>
        </div>
      
        <div id="winContent" class="hidden-content">
            <div class="window-title">
                <span>System Message</span>
                <button class="close-button" onclick="hideWin()">X</button>
            </div>
            <p>üéâ –ü–æ–∑–¥—Ä–∞–≤–ª—è—é! –¢—ã –Ω–∞—à–µ–ª —Å–µ–∫—Ä–µ—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ!</p>
            <p>–≠—Ç–æ—Ç —Å–∞–π—Ç —Å–æ–∑–¥–∞–Ω –≤ —Å—Ç–∏–ª–µ Windows 98 —Å –ø–∏–∫—Å–µ–ª—å–Ω–æ–π –≥—Ä–∞—Ñ–∏–∫–æ–π.</p>
            <p>–ù–∞–∂–º–∏ –Ω–∞ X —á—Ç–æ–±—ã –∑–∞–∫—Ä—ã—Ç—å —ç—Ç–æ –æ–∫–Ω–æ.</p>
        </div>
    </div>
    <script>
        // Game variables
        let canvas, ctx;
        let player = {
            screenX: 120,
            width: 48,
            height: 48,
            worldX: 0,
            y: 0,
            vy: 0,
            onGround: true
        };
        let obstacles = [];
        let score = 0;
        let speed = 0;
        let groundY = 420;
        let portalX = 12000;
        let hasPortal = false;
        let gameState = 'menu';
        const gravity = 0.7;
        const jumpPower = -16;
        const spawnAhead = 750;
        const baseGap = 220;

        function initCanvas() {
            canvas = document.getElementById('gameCanvas');
            ctx = canvas.getContext('2d');
            canvas.width = 900;
            canvas.height = 500;
            groundY = canvas.height - 80;
        }

        function resetGame() {
            obstacles.length = 0;
            score = 0;
            speed = 4.5;
            hasPortal = false;
            player.worldX = 0;
            player.y = groundY - player.height;
            player.vy = 0;
            player.onGround = true;
            gameState = 'running';
        }

        function update() {
            if (gameState !== 'running') return;

            // Player physics
            player.vy += gravity;
            player.y += player.vy;
            if (player.y >= groundY - player.height) {
                player.y = groundY - player.height;
                player.vy = 0;
                player.onGround = true;
            } else {
                player.onGround = false;
            }

            player.worldX += speed;
            score = Math.floor(player.worldX / 8);
            speed += 0.0012;

            // Spawn obstacles
            let lastX = player.worldX;
            if (obstacles.length > 0) {
                lastX = Math.max(lastX, obstacles[obstacles.length - 1].worldX);
            }
            if (lastX < player.worldX + spawnAhead) {
                let gap = baseGap + Math.random() * 280;
                let newX = lastX + gap;
                if (newX < portalX) {
                    let stacks = 1 + Math.floor(Math.random() * 3); // 1-3 stacks
                    let isRed = Math.random() < 0.35;
                    obstacles.push({
                        worldX: newX,
                        width: 48,
                        height: stacks * 48,
                        type: isRed ? 'red' : 'normal'
                    });
                }
            }

            // Spawn portal
            if (!hasPortal && player.worldX > portalX - 2000) {
                obstacles.push({
                    worldX: portalX,
                    width: 72,
                    height: 108,
                    type: 'portal'
                });
                hasPortal = true;
            }

            // Update obstacles and collisions
            for (let i = obstacles.length - 1; i >= 0; i--) {
                let obs = obstacles[i];
                let screenX = obs.worldX - player.worldX + player.screenX;
                if (screenX + obs.width < -60) {
                    obstacles.splice(i, 1);
                    continue;
                }

                let obsScreenY = groundY - obs.height;
                let px1 = player.screenX, py1 = player.y;
                let px2 = px1 + player.width, py2 = py1 + player.height;
                let ox1 = screenX, oy1 = obsScreenY;
                let ox2 = ox1 + obs.width, oy2 = oy1 + obs.height;

                if (px2 > ox1 && px1 < ox2 && py2 > oy1 && py1 < oy2) {
                    if (obs.type === 'portal') {
                        gameState = 'won';
                        win();
                    } else {
                        gameState = 'died';
                        die();
                    }
                    return;
                }
            }
        }

        function draw() {
            ctx.clearRect(0, 0, canvas.width, canvas.height);

            // Sky gradient
            let skyGrad = ctx.createLinearGradient(0, 0, 0, groundY);
            skyGrad.addColorStop(0, '#E8F4FD');
            skyGrad.addColorStop(0.5, '#F0F8FF');
            skyGrad.addColorStop(1, '#FFFFFF');
            ctx.fillStyle = skyGrad;
            ctx.fillRect(0, 0, canvas.width, groundY);

            // Ground
            ctx.fillStyle = '#C0C0C0';
            ctx.fillRect(0, groundY, canvas.width, canvas.height - groundY);

            // Ground texture scroll
            let groundScroll = (player.worldX * 0.4) % 24;
            ctx.strokeStyle = '#9F9F9F';
            ctx.lineWidth = 1;
            for (let i = 0; i < canvas.width / 12 + 3; i++) {
                let lineX = (i * 12 - groundScroll) % 12 + Math.floor(groundScroll / 12) * 12;
                ctx.beginPath();
                ctx.moveTo(lineX, groundY);
                ctx.lineTo(lineX, canvas.height);
                ctx.stroke();
            }

            // Obstacles
            for (let obs of obstacles) {
                let screenX = obs.worldX - player.worldX + player.screenX;
                let screenY = groundY - obs.height;
                if (screenX > canvas.width + 60 || screenX + obs.width < -60) continue;
                drawBlock(ctx, screenX, screenY, obs.width, obs.height, obs.type);
            }

            // Player
            drawPlayer(ctx, player.screenX, player.y);

            // HUD
            ctx.fillStyle = '#000000';
            ctx.font = 'bold 28px monospace';
            ctx.textAlign = 'left';
            ctx.textBaseline = 'top';
            ctx.fillText(`Distance: ${score}`, 25, 25);
        }

        function drawBlock(ctx, x, y, w, h, type) {
            let bgColor, hlColor, shColor;
            if (type === 'normal') {
                bgColor = '#C0C0C0';
                hlColor = '#FFFFFF';
                shColor = '#808080';
            } else if (type === 'red') {
                bgColor = '#FF4D4D';
                hlColor = '#FFFFFF';
                shColor = '#CC0000';
            } else if (type === 'portal') {
                bgColor = '#1E90FF';
                hlColor = '#87CEFA';
                shColor = '#000080';
            }

            // Background
            ctx.fillStyle = bgColor;
            ctx.fillRect(x, y, w, h);

            // Highlight top/left
            ctx.strokeStyle = hlColor;
            ctx.lineWidth = 2.5;
            ctx.lineCap = 'square';
            ctx.strokeRect(x + 0.5, y + 0.5, w - 1, 1); // top
            ctx.beginPath();
            ctx.moveTo(x + 0.5, y + 2);
            ctx.lineTo(x + 0.5, y + h - 2);
            ctx.lineWidth = 2;
            ctx.stroke(); // left

            // Shadow bottom/right
            ctx.strokeStyle = shColor;
            ctx.lineWidth = 2.5;
            ctx.strokeRect(x, y + h - 1, w, 1); // bottom
            ctx.beginPath();
            ctx.moveTo(x + w - 1.5, y + 1);
            ctx.lineTo(x + w - 1.5, y + h);
            ctx.lineWidth = 2;
            ctx.stroke(); // right

            // Portal shine
            if (type === 'portal') {
                let shineGrad = ctx.createRadialGradient(x + 12, y + 15, 0, x + 12, y + 15, 20);
                shineGrad.addColorStop(0, 'rgba(255,255,255,0.8)');
                shineGrad.addColorStop(0.7, 'rgba(255,255,255,0.3)');
                shineGrad.addColorStop(1, 'rgba(255,255,255,0)');
                ctx.fillStyle = shineGrad;
                ctx.fillRect(x + 8, y + 8, 24, 24);
            }
        }

        function drawPlayer(ctx, x, y) {
            // Body
            drawBlock(ctx, x, y, player.width, player.height, 'normal');
            ctx.fillStyle = '#A8A8A8';
            ctx.fillRect(x + 6, y + 6, player.width - 12, player.height - 12);

            // Eyes
            ctx.fillStyle = '#FFFFFF';
            ctx.fillRect(x + 10, y + 14, 6, 6);
            ctx.fillRect(x + 24, y + 14, 6, 6);
            ctx.fillStyle = '#000000';
            ctx.fillRect(x + 12, y + 16, 2, 2);
            ctx.fillRect(x + 26, y + 16, 2, 2);

            // Mouth
            ctx.fillStyle = '#404040';
            ctx.fillRect(x + 16, y + 28, 12, 3);
        }

        function gameLoop() {
            update();
            draw();
            requestAnimationFrame(gameLoop);
        }

        function initGame() {
            resetGame();
            gameLoop();
        }

        // Input
        document.addEventListener('keydown', (e) => {
            if (gameState !== 'running') return;
            if (e.code === 'Space' || e.code === 'ArrowUp') {
                e.preventDefault();
                if (player.onGround) {
                    player.vy = jumpPower;
                    player.onGround = false;
                }
            }
        });

        // Game functions
        function showContent() {
            document.querySelector('.win98-button').style.display = 'none';
            initCanvas();
            document.getElementById('gameCanvas').style.display = 'block';
            document.getElementById('gameCanvas').focus();
            document.getElementById('gameOver').style.display = 'none';
            document.getElementById('winContent').style.display = 'none';
            initGame();
        }

        function die() {
            document.getElementById('finalScore').innerText = score;
            document.getElementById('gameCanvas').style.display = 'none';
            document.getElementById('gameOver').style.display = 'block';
        }

        function win() {
            document.getElementById('gameCanvas').style.display = 'none';
            document.getElementById('winContent').style.display = 'block';
        }

        function restart() {
            document.getElementById('gameOver').style.display = 'none';
            document.getElementById('winContent').style.display = 'none';
            document.getElementById('gameCanvas').style.display = 'block';
            document.getElementById('gameCanvas').focus();
            initGame();
        }

        function hideWin() {
            document.getElementById('winContent').style.display = 'none';
        }
    </script>
</body>
</html>
